<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Jx (jx.Jx)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">jx</a> &#x00BB; Jx</nav><header class="odoc-preamble"><h1>Module <code><span>Jx</span></code></h1><p>External JavaScript language interface for OCaml.</p><p>This module provides definitions and external primitives that facilitate type-safe compile-time and runtime interoperability between JavaScript and OCaml using the <a href="https://github.com/ocsigen/js_of_ocaml">js_of_ocaml</a> compiler.</p><p><b>Example:</b></p><p>The following example provides bindings for the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById">getElementById</a> method of the global <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document">document</a> object.</p><pre class="language-ocaml"><code>module E = Jx.Encode
module D = Jx.Decode

(* Bind the global document object. *)
let document : [ `Document ] Jx.obj = Jx.expr &quot;document&quot;

(* Bind the getElementById method call. *)
let get_element_by_id id : [ `Element ] Jx.obj =
  D.obj (D.meth document &quot;getElementById&quot; [| E.string id |])

let () = Jx.log (get_element_by_id &quot;container&quot;)</code></pre><p>Which generates the following code (in addition to the OCaml runtime):</p><pre class="language-javascript"><code>log (document.getElementById &quot;container&quot;)</code></pre><p>In this example, the <a href="Decode/index.html"><code>Decode</code></a> and <a href="Encode/index.html"><code>Encode</code></a> modules are used to encode the method arguments and decode the return object. Type annotations are used to constrain the <a href="#type-obj" title="obj">object class</a>.</p></header><nav class="odoc-toc"><ul><li><a href="#types">Types</a><ul><li><a href="#object">Object</a></li><li><a href="#dict">Dict</a></li><li><a href="#nullable">Nullable</a></li><li><a href="#undefined">Undefined</a></li><li><a href="#boolean">Boolean</a></li><li><a href="#number">Number</a></li><li><a href="#string">String</a></li><li><a href="#symbol">Symbol</a></li><li><a href="#array">Array</a></li></ul></li><li><a href="#unicode">Unicode</a></li><li><a href="#global">Global</a><ul><li><a href="#bindings">Bindings</a></li><li><a href="#encode">Encode</a></li><li><a href="#decode">Decode</a></li><li><a href="#raw">Raw JavaScript</a></li></ul></li><li><a href="#debug">Debug</a></li></ul></nav><div class="odoc-content"><h2 id="types"><a href="#types" class="anchor"></a>Types</h2><p>All standard JavaScript types are directly representable in OCaml without wrapping or any runtime conversions. This is achieved by providing semi-abstract types for global JavaScript objects types like <a href="#number" title="number">Number</a> and <a href="#array" title="array">Array</a>.</p><p>When interacting with JavaScript APIs you can either use the specialized <a href="#object" title="object">Object</a> types for zero-cost access to values of that type, or you can write <a href="#bindings" title="bindings">Bindings</a> that convert OCaml values to JavaScript and vice-versa.</p><h3 id="object"><a href="#object" class="anchor"></a>Object</h3><div class="odoc-spec"><div class="spec type anchored" id="type-obj"><a href="#type-obj" class="anchor"></a><code><span><span class="keyword">type</span> <span>+'c obj</span></span><span> <span class="keyword">constraint</span> <span class="type-var">'c</span> = <span>[&gt;  ]</span></span></code></div><div class="spec-doc"><p>Typed JavaScript objects.</p><p>The type parameter <code>'c</code> is used to differentiate between objects of different classes using polymorphic variants.</p><p>For example, the JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a> class can be represented as: <code>[ `Date ] Js.obj</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-any"><a href="#type-any" class="anchor"></a><code><span><span class="keyword">type</span> any</span><span> = <span><span>[ `Any ]</span> <a href="#type-obj">obj</a></span></span></code></div><div class="spec-doc"><p>Opaque JavaScript objects.</p><p>The <code>any</code> type is used to represent arbitrary JavaScript values whose static type information is unknown. This is useful for interfacing with low-level JavaScript APIs.</p><p>The JavaScript <a href="#type-any"><code>any</code></a> values can be converted to and from OCaml values using the <a href="Encode/index.html"><code>Encode</code></a> and <a href="Decode/index.html"><code>Decode</code></a> modules.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-prop"><a href="#type-prop" class="anchor"></a><code><span><span class="keyword">type</span> prop</span><span> = string</span></code></div><div class="spec-doc"><p>JavaScript object property names.</p><p><em>Note:</em> Properties names with non-ASCII characters require transcoding (see <a href="#unicode" title="unicode">Unicode</a>).</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-prop">prop</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <a href="#type-obj">obj</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-set"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-prop">prop</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-del"><a href="#val-del" class="anchor"></a><code><span><span class="keyword">val</span> del : <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-prop">prop</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-obj"><a href="#val-obj" class="anchor"></a><code><span><span class="keyword">val</span> obj : <span><span><span>(<a href="#type-prop">prop</a> * <a href="#type-any">any</a>)</span> <span class="xref-unresolved">Stdlib</span>.Array.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span></span></code></div><div class="spec-doc"><p><code>obj [| (prop1, v1); ... |]</code> is <code>{prop1: v1, ... }</code>.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-obj_new"><a href="#val-obj_new" class="anchor"></a><code><span><span class="keyword">val</span> obj_new : <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-any">any</a> <span class="xref-unresolved">Stdlib</span>.Array.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-obj">obj</a></span></span></code></div><div class="spec-doc"><p><code>obj_new obj []</code> is <code>new obj(...args)</code>.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-typeof"><a href="#val-typeof" class="anchor"></a><code><span><span class="keyword">val</span> typeof : <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.String.t</span></code></div><div class="spec-doc"><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof">typeof</a>.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-instanceof"><a href="#val-instanceof" class="anchor"></a><code><span><span class="keyword">val</span> instanceof : <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">constr</span>:<span><span class="type-var">'constr</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof">instanceof</a>.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Equality">Equality (==)</a>.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-strict_equal"><a href="#val-strict_equal" class="anchor"></a><code><span><span class="keyword">val</span> strict_equal : <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Strict_equality">Strict equality (===)</a>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Object"><a href="#module-Object" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Object/index.html">Object</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a> class.</p></div></div><h3 id="dict"><a href="#dict" class="anchor"></a>Dict</h3><div class="odoc-spec"><div class="spec type anchored" id="type-dict"><a href="#type-dict" class="anchor"></a><code><span><span class="keyword">type</span> <span>+'a dict</span></span><span> = <span><span>[ <span>`Dict of <span class="type-var">'a</span></span> ]</span> <a href="#type-obj">obj</a></span></span></code></div><div class="spec-doc"><p>The type for JavaScript objects that act as containers for values of the same type.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-dict"><a href="#val-dict" class="anchor"></a><code><span><span class="keyword">val</span> dict : <span><span><span>(<a href="#type-prop">prop</a> * <span class="type-var">'a</span>)</span> <span class="xref-unresolved">Stdlib</span>.Array.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-dict">dict</a></span></span></code></div><div class="spec-doc"><p>An object with homogeneous value types.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Dict"><a href="#module-Dict" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Dict/index.html">Dict</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Operations on <a href="#type-dict"><code>dict</code></a> values.</p></div></div><h3 id="nullable"><a href="#nullable" class="anchor"></a>Nullable</h3><p>Type-safe encoding of JavaScript values that can be null.</p><div class="odoc-spec"><div class="spec type anchored" id="type-nullable"><a href="#type-nullable" class="anchor"></a><code><span><span class="keyword">type</span> <span>+'a nullable</span></span><span> = <span><span>[ <span>`Nullable of <span class="type-var">'a</span></span> ]</span> <a href="#type-obj">obj</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-null"><a href="#val-null" class="anchor"></a><code><span><span class="keyword">val</span> null : <span><span class="type-var">'a</span> <a href="#type-nullable">nullable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-nullable"><a href="#val-nullable" class="anchor"></a><code><span><span class="keyword">val</span> nullable : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-nullable">nullable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_null"><a href="#val-is_null" class="anchor"></a><code><span><span class="keyword">val</span> is_null : <span><span><span class="type-var">'a</span> <a href="#type-nullable">nullable</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Nullable"><a href="#module-Nullable" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Nullable/index.html">Nullable</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Operations on <a href="#type-nullable"><code>nullable</code></a> values.</p></div></div><h3 id="undefined"><a href="#undefined" class="anchor"></a>Undefined</h3><p>Type-safe encoding of JavaScript values that can be undefined.</p><div class="odoc-spec"><div class="spec type anchored" id="type-undefined"><a href="#type-undefined" class="anchor"></a><code><span><span class="keyword">type</span> <span>+'a undefined</span></span><span> = <span><span>[ <span>`Undefined of <span class="type-var">'a</span></span> ]</span> <a href="#type-obj">obj</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-undefined"><a href="#val-undefined" class="anchor"></a><code><span><span class="keyword">val</span> undefined : <span><span class="type-var">'a</span> <a href="#type-undefined">undefined</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-defined"><a href="#val-defined" class="anchor"></a><code><span><span class="keyword">val</span> defined : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-undefined">undefined</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_undefined"><a href="#val-is_undefined" class="anchor"></a><code><span><span class="keyword">val</span> is_undefined : <span><span><span class="type-var">'a</span> <a href="#type-undefined">undefined</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_defined"><a href="#val-is_defined" class="anchor"></a><code><span><span class="keyword">val</span> is_defined : <span><span><span class="type-var">'a</span> <a href="#type-undefined">undefined</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Undefined"><a href="#module-Undefined" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Undefined/index.html">Undefined</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Operations on <a href="#type-undefined"><code>undefined</code></a> values.</p></div></div><h3 id="boolean"><a href="#boolean" class="anchor"></a>Boolean</h3><div class="odoc-spec"><div class="spec type anchored" id="type-boolean"><a href="#type-boolean" class="anchor"></a><code><span><span class="keyword">type</span> boolean</span><span> = <span><span>[ `Boolean ]</span> <a href="#type-obj">obj</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span><span class="xref-unresolved">Stdlib</span>.Bool.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-boolean">boolean</a></span></code></div><div class="spec-doc"><p>Create a JavaScript Boolean from an OCaml bool.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-true'"><a href="#val-true'" class="anchor"></a><code><span><span class="keyword">val</span> true' : <a href="#type-boolean">boolean</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-false'"><a href="#val-false'" class="anchor"></a><code><span><span class="keyword">val</span> false' : <a href="#type-boolean">boolean</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Boolean"><a href="#module-Boolean" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Boolean/index.html">Boolean</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="number"><a href="#number" class="anchor"></a>Number</h3><div class="odoc-spec"><div class="spec type anchored" id="type-number"><a href="#type-number" class="anchor"></a><code><span><span class="keyword">type</span> number</span><span> = <span><span>[ `Number ]</span> <a href="#type-obj">obj</a></span></span></code></div><div class="spec-doc"><p>The JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a> type.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-int"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span><span class="xref-unresolved">Stdlib</span>.Int.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-number">number</a></span></code></div><div class="spec-doc"><p>Create a JavaScript <a href="#type-number"><code>number</code></a> from an OCaml int.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-float"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span><span class="xref-unresolved">Stdlib</span>.Float.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-number">number</a></span></code></div><div class="spec-doc"><p>Create a JavaScript <a href="#type-number"><code>number</code></a> from an OCaml float.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span><span class="xref-unresolved">Stdlib</span>.Int32.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-number">number</a></span></code></div><div class="spec-doc"><p>Create a JavaScript <a href="#type-number"><code>number</code></a> from an OCaml int32.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-nativeint"><a href="#val-nativeint" class="anchor"></a><code><span><span class="keyword">val</span> nativeint : <span><span class="xref-unresolved">Stdlib</span>.Nativeint.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-number">number</a></span></code></div><div class="spec-doc"><p>Create a JavaScript <a href="#type-number"><code>number</code></a> from an OCaml nativeint.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Number"><a href="#module-Number" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Number/index.html">Number</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a> class.</p></div></div><h3 id="string"><a href="#string" class="anchor"></a>String</h3><div class="odoc-spec"><div class="spec type anchored" id="type-string"><a href="#type-string" class="anchor"></a><code><span><span class="keyword">type</span> string</span><span> = <span><span>[ `String ]</span> <a href="#type-obj">obj</a></span></span></code></div><div class="spec-doc"><p>The JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> type.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span><span class="xref-unresolved">Stdlib</span>.String.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-string">string</a></span></code></div><div class="spec-doc"><p>Create a JavaScript String from an OCaml string.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-String"><a href="#module-String" class="anchor"></a><code><span><span class="keyword">module</span> <a href="String/index.html">String</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> class.</p></div></div><h3 id="symbol"><a href="#symbol" class="anchor"></a>Symbol</h3><div class="odoc-spec"><div class="spec type anchored" id="type-symbol"><a href="#type-symbol" class="anchor"></a><code><span><span class="keyword">type</span> symbol</span><span> = <span><span>[ `Symbol ]</span> <a href="#type-obj">obj</a></span></span></code></div><div class="spec-doc"><p>The JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a> type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-symbol"><a href="#val-symbol" class="anchor"></a><code><span><span class="keyword">val</span> symbol : <span><span class="xref-unresolved">Stdlib</span>.String.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-symbol">symbol</a></span></code></div><div class="spec-doc"><p>Create a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/Symbol">Symbol</a> with a description.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Symbol"><a href="#module-Symbol" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Symbol/index.html">Symbol</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="array"><a href="#array" class="anchor"></a>Array</h3><div class="odoc-spec"><div class="spec type anchored" id="type-array"><a href="#type-array" class="anchor"></a><code><span><span class="keyword">type</span> <span>+'a array</span></span><span> = <span><span>[ <span>`Array of <span class="type-var">'a</span></span> ]</span> <a href="#type-obj">obj</a></span></span></code></div><div class="spec-doc"><p>The JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a> type.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-array"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Stdlib</span>.Array.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-array">array</a></span></span></code></div><div class="spec-doc"><p>Create a JavaScript Array from an OCaml array.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-list"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Stdlib</span>.List.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-array">array</a></span></span></code></div><div class="spec-doc"><p>Create a JavaScript Array from an OCaml list.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Array"><a href="#module-Array" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Array/index.html">Array</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a> class.</p></div></div><h2 id="unicode"><a href="#unicode" class="anchor"></a>Unicode</h2><p>Use <a href="#val-unicode"><code>unicode</code></a> when passing a Unicode string from OCaml to JavaScript.</p><pre class="language-ocaml"><code>Jx.log (Jx.unicode &quot;Olá, OCaml! 🐫&quot;)</code></pre><p>This is needed because the Unicode encoding in JavaScript and OCaml are different:</p><ul><li>Strings in JavaScript use UTF-16.</li><li>Strings in OCaml, while being arbitrary sequences of bytes, typically use UTF-8.</li></ul><p>This means that an OCaml Unicode string is <em>not</em> a valid JavaScript Unicode string. Transcoding functions between UTF-8 and UTF-16 are provided below.</p><p><em>Note:</em> Regular ASCII strings do not require transcoding.</p><p>See <a href="https://ocaml.org/manual/4.12/api/String.html">String in The OCaml Manual</a>.</p><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String on MDN</a>.</p><div class="odoc-spec"><div class="spec value external anchored" id="val-utf16"><a href="#val-utf16" class="anchor"></a><code><span><span class="keyword">val</span> utf16 : <span><span class="xref-unresolved">Stdlib</span>.String.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.String.t</span></code></div><div class="spec-doc"><p>Transcode a string from UTF-8 to UTF-16.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-utf8"><a href="#val-utf8" class="anchor"></a><code><span><span class="keyword">val</span> utf8 : <span><span class="xref-unresolved">Stdlib</span>.String.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.String.t</span></code></div><div class="spec-doc"><p>Transcode a string from UTF-16 to UTF-8.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-unicode"><a href="#val-unicode" class="anchor"></a><code><span><span class="keyword">val</span> unicode : <span><span class="xref-unresolved">Stdlib</span>.String.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.String.t</span></code></div><div class="spec-doc"><p>Transcode a string from UTF-8 to UTF-16 for usage with JavaScript.</p><p>This is an alias for <a href="#val-utf16"><code>utf16</code></a>.</p></div></div><h2 id="global"><a href="#global" class="anchor"></a>Global</h2><div class="odoc-spec"><div class="spec value anchored" id="val-global"><a href="#val-global" class="anchor"></a><code><span><span class="keyword">val</span> global : <a href="#type-any">any</a></span></code></div><div class="spec-doc"><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis">globalThis</a>.</p><pre class="language-ocaml"><code>let window : [ `Window ] Jx.obj = Jx.get Jx.global &quot;window&quot;</code></pre></div></div><h3 id="bindings"><a href="#bindings" class="anchor"></a>Bindings</h3><p>Bindings are definitions that allow accessing JavaScript functions and classes from OCaml.</p><p>The following example uses the <a href="Encode/index.html"><code>Encode</code></a> and <a href="Decode/index.html"><code>Decode</code></a> modules to provide bindings for the builtin <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt">parseInt</a> JavaScript function:</p><pre class="language-ocaml"><code>module E = Jx.Encode
module D = Jx.Decode

(* val parse_int : radix:int -&gt; string -&gt; int *)
let parse_int ~radix str =
  D.int (D.func (Jx.expr &quot;parseInt&quot;) [| E.string str; E.int radix |])

let () = Jx.log (parse_int ~radix:10 &quot;42&quot;)</code></pre><p>In the above example, <a href="#val-expr"><code>Jx.expr</code></a> is used to obtain a reference to the JavaScript <code>parseInt</code> function. It is then decoded as a function and called with an array of JavaScript-encoded arguments. Finally, the return value is decoded as an integer.</p><p>After compilation, the following JavaScript code should be produced (in addition to the OCaml runtime):</p><pre class="language-javascript"><code>var x = parseInt(&quot;42&quot;, 10);
console.log(x)</code></pre><p><b>Warning:</b> The conversion modules and other low-level primitives provided here are unsafe by nature. When values are decoded or encoded, no static or dynamic type-checking is performed. It is up to the authors of the bindings to ensure they are using correct typing assumptions.</p><h3 id="encode"><a href="#encode" class="anchor"></a>Encode</h3><p>Encode OCaml values into opaque JavaScript values.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Encode"><a href="#module-Encode" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Encode/index.html">Encode</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="decode"><a href="#decode" class="anchor"></a>Decode</h3><p>Decode OCaml values from opaque JavaScript values.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Decode"><a href="#module-Decode" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Decode/index.html">Decode</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="raw"><a href="#raw" class="anchor"></a>Raw JavaScript</h3><p>The <a href="#val-expr"><code>expr</code></a> and <a href="#val-stmt"><code>stmt</code></a> primitives embed untyped JavaScript code into the compiled output.</p><p>The textual representation of the code must be valid JavaScript, otherwise the compilation will fail.</p><p>The provided JavaScript code must be represented as a static string literal. If the provided code string is computed dynamically, the evaluation will fallback to runtime and an error will be thrown (check the console for evaluation errors).</p><p><b>Warning:</b> <a href="#val-expr"><code>expr</code></a> and <a href="#val-stmt"><code>stmt</code></a> are unsafe since no type-checking is performed on the embedded code.</p><div class="odoc-spec"><div class="spec value external anchored" id="val-expr"><a href="#val-expr" class="anchor"></a><code><span><span class="keyword">val</span> expr : <span><span class="xref-unresolved">Stdlib</span>.String.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <a href="#type-obj">obj</a></span></span></code></div><div class="spec-doc"><p>Unsafe JavaScript expression.</p><pre class="language-ocaml"><code>assert (Jx.Decode.int (Jx.expr &quot;2 + 2&quot;) = 4)</code></pre></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-stmt"><a href="#val-stmt" class="anchor"></a><code><span><span class="keyword">val</span> stmt : <span><span class="xref-unresolved">Stdlib</span>.String.t <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Unsafe JavaScript statement.</p><pre class="language-ocaml"><code>let () = Jx.stmt &quot;console.log('hello')&quot;</code></pre></div></div><h2 id="debug"><a href="#debug" class="anchor"></a>Debug</h2><div class="odoc-spec"><div class="spec value anchored" id="val-debug"><a href="#val-debug" class="anchor"></a><code><span><span class="keyword">val</span> debug : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print the runtime representation of a value using <a href="https://developer.mozilla.org/en-US/docs/Web/API/console/debug_static">console.debug</a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-log"><a href="#val-log" class="anchor"></a><code><span><span class="keyword">val</span> log : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print the runtime representation of a value using <a href="https://developer.mozilla.org/en-US/docs/Web/API/console/log_static">console.log</a>.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-debugger"><a href="#val-debugger" class="anchor"></a><code><span><span class="keyword">val</span> debugger : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/debugger">debugger</a>.</p></div></div></div></body></html>
